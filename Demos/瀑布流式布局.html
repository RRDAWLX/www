<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>瀑布流式布局</title>

<style>
* {margin:0; padding:0; border:0;}
#container {position:relative; width:700px; margin:auto;}
.waterfall {position:absolute; display:block; width:220px; margin:0 10px 20px;}
.waterfall1 {height:300px; background-color:red;}
.waterfall2 {height:320px; background-color:blue;}
.waterfall3 {height:340px; background-color:green;}
.waterfall4 {height:360px; background-color:yellow;}
</style>
</head>

<body>
<div id="container">
  <div class="waterfall waterfall1"></div>
  <div class="waterfall waterfall2"></div>
  <div class="waterfall waterfall3"></div>
  <div class="waterfall waterfall4"></div>
  <div class="waterfall waterfall1"></div>
  <div class="waterfall waterfall2"></div>
  <div class="waterfall waterfall3"></div>
  <div class="waterfall waterfall4"></div>
  <div class="waterfall waterfall1"></div>
  <div class="waterfall waterfall2"></div>
  <div class="waterfall waterfall3"></div>
  <div class="waterfall waterfall4"></div>
  <div class="waterfall waterfall2"></div>
  <div class="waterfall waterfall3"></div>
  <div class="waterfall waterfall4"></div>
  <div class="waterfall waterfall4"></div>
  <div class="waterfall waterfall2"></div>
  <div class="waterfall waterfall4"></div>
  <div class="waterfall waterfall2"></div>
  <div class="waterfall waterfall3"></div>
</div>

<script>
(function(){
	var items = document.getElementsByClassName('waterfall'),
		len = items.length,
		i,
		h_container = 0;
		h1 = 0,
		h2 = 0,
		h3 = 0;
	
	for(i = 0; i < len; i++){
		items[i].style.top = h1 + 'px';
		items[i].style.left = '0px';
		h1 += items[i].offsetHeight + 20;
		
		if(++i < len){
			items[i].style.top = h2 + 'px';
			items[i].style.left = '240px';
			h2 += items[i].offsetHeight + 20;
		}
		
		if(++i < len){
			items[i].style.top = h3 + 'px';
			items[i].style.left = '480px';
			h3 += items[i].offsetHeight + 20;
		}
	}
	
	h_container = (h1 > h2) ? h1 : h2;
	h_container = (h_container > h3) ? h_container : h3;
	document.getElementById('container').style.height = h_container + 'px';
}());
</script>
</body>
</html>
